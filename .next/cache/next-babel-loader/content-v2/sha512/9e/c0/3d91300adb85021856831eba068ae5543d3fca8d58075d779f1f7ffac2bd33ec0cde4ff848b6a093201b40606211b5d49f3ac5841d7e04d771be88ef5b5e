{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/juanma/projects/membrane-front/src/legacy/views/TwoFactor/index.js\",\n    _s = $RefreshSig$();\n\nimport { memo, useState } from 'react';\nimport classnames from 'classnames'; //styles\n\nimport * as styles from './styles.module.scss'; //hooks\n\nimport useUser from '../../hooks/useUser'; //components\n\nimport Form from '../../components/Form';\nimport Splash from '../../components/Splash';\nimport DigitCode from '../../components/DigitCode';\nexport default _c2 = /*#__PURE__*/memo(_c = _s(function TwoFactor(props) {\n  var _this = this;\n\n  _s();\n\n  //hook user\n  var _useUser = useUser(),\n      twoFactorAuth = _useUser.twoFactorAuth,\n      twoFactorSignIn = _useUser.twoFactorSignIn,\n      requestNewSecurityCode = _useUser.requestNewSecurityCode,\n      clearToken = _useUser.clearToken; //states\n\n\n  var _useState = useState(''),\n      customError = _useState[0],\n      setCustomError = _useState[1];\n\n  var _useState2 = useState(''),\n      codeValue = _useState2[0],\n      setCodeValue = _useState2[1];\n\n  var _useState3 = useState(false),\n      codeComplete = _useState3[0],\n      setCodeComplete = _useState3[1]; //bind styles\n\n\n  classnames.bind(styles);\n\n  var onSignIn = function onSignIn() {\n    var payload = {\n      code: codeValue\n    };\n    twoFactorSignIn(payload).then(function () {\n      props.history.push('/');\n    })[\"catch\"](function (error) {\n      return setCustomError({\n        field: 'digit',\n        type: 'custom',\n        message: error === null || error === void 0 ? void 0 : error.message\n      });\n    });\n  };\n\n  var onCancel = function onCancel() {\n    clearToken();\n    props.history.push('/sign-in');\n  };\n\n  var onRequestNewCode = function onRequestNewCode() {\n    setCustomError('');\n    setCodeComplete(false);\n    requestNewSecurityCode()[\"catch\"](function (error) {\n      return setCustomError({\n        field: 'digit',\n        type: 'custom',\n        message: error === null || error === void 0 ? void 0 : error.message\n      });\n    });\n  };\n\n  var onDigitCodeChange = function onDigitCodeChange(digitInput, value) {\n    setCodeValue(value);\n    setCodeComplete(!digitInput.filter(function (digit) {\n      return !digit.value;\n    }).length);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Splash, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.twoFactorContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Two-Factor Authentication\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Please enter below the 6-digit security code. You will get it through\\xA0\", twoFactorAuth === null || twoFactorAuth === void 0 ? void 0 : twoFactorAuth.type, \" to your ********\", twoFactorAuth === null || twoFactorAuth === void 0 ? void 0 : twoFactorAuth.clue, \"\\xA0\", (twoFactorAuth === null || twoFactorAuth === void 0 ? void 0 : twoFactorAuth.type) === 'SMS' ? 'phone' : 'email account', \".\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.twoFactorForm,\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          customError: customError,\n          items: [{\n            label: 'Enter your 6-digit code',\n            name: 'digit',\n            type: 'custom',\n            customComponent: function customComponent() {\n              return /*#__PURE__*/_jsxDEV(DigitCode, {\n                digits: 6,\n                onDigitCodeChange: onDigitCodeChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 21\n              }, _this);\n            }\n          }],\n          actions: [{\n            type: 'primary',\n            label: 'Sign In',\n            disabled: !codeComplete,\n            onClick: onSignIn\n          }, {\n            type: 'secondary',\n            label: 'Cancel',\n            onClick: onCancel\n          }, {\n            type: 'tertiary',\n            label: 'Send new code',\n            onClick: onRequestNewCode\n          }]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}, \"eE8WwfQiGC2pDARn8HrC7qnbB4c=\", false, function () {\n  return [useUser];\n}));\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"%default%$memo\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/home/juanma/projects/membrane-front/src/legacy/views/TwoFactor/index.js"],"names":["memo","useState","classnames","styles","useUser","Form","Splash","DigitCode","TwoFactor","props","twoFactorAuth","twoFactorSignIn","requestNewSecurityCode","clearToken","customError","setCustomError","codeValue","setCodeValue","codeComplete","setCodeComplete","bind","onSignIn","payload","code","then","history","push","error","field","type","message","onCancel","onRequestNewCode","onDigitCodeChange","digitInput","value","filter","digit","length","twoFactorContainer","clue","twoFactorForm","label","name","customComponent","disabled","onClick"],"mappings":"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","sourcesContent":["import { memo, useState } from 'react';\nimport classnames from 'classnames';\n\n//styles\nimport * as styles from './styles.module.scss';\n\n//hooks\nimport useUser from '../../hooks/useUser';\n\n//components\nimport Form from '../../components/Form';\nimport Splash from '../../components/Splash';\nimport DigitCode from '../../components/DigitCode';\n\nexport default memo(function TwoFactor(props) {\n  //hook user\n  const { twoFactorAuth, twoFactorSignIn, requestNewSecurityCode, clearToken } =\n    useUser();\n\n  //states\n  const [customError, setCustomError] = useState('');\n  const [codeValue, setCodeValue] = useState('');\n  const [codeComplete, setCodeComplete] = useState(false);\n\n  //bind styles\n  classnames.bind(styles);\n\n  const onSignIn = () => {\n    const payload = { code: codeValue };\n\n    twoFactorSignIn(payload)\n      .then(() => {\n        props.history.push('/');\n      })\n      .catch(error =>\n        setCustomError({\n          field: 'digit',\n          type: 'custom',\n          message: error?.message\n        })\n      );\n  };\n\n  const onCancel = () => {\n    clearToken();\n    props.history.push('/sign-in');\n  };\n\n  const onRequestNewCode = () => {\n    setCustomError('');\n    setCodeComplete(false);\n    requestNewSecurityCode().catch(error =>\n      setCustomError({\n        field: 'digit',\n        type: 'custom',\n        message: error?.message\n      })\n    );\n  };\n\n  const onDigitCodeChange = (digitInput, value) => {\n    setCodeValue(value);\n    setCodeComplete(!digitInput.filter(digit => !digit.value).length);\n  };\n\n  return (\n    <Splash>\n      <div className={styles.twoFactorContainer}>\n        <h2>Two-Factor Authentication</h2>\n        <label>\n          Please enter below the 6-digit security code. You will get it\n          through&nbsp;{twoFactorAuth?.type} to your ********\n          {twoFactorAuth?.clue}&nbsp;\n          {twoFactorAuth?.type === 'SMS' ? 'phone' : 'email account'}.\n        </label>\n\n        <div className={styles.twoFactorForm}>\n          <Form\n            customError={customError}\n            items={[\n              {\n                label: 'Enter your 6-digit code',\n                name: 'digit',\n                type: 'custom',\n                customComponent: () => {\n                  return (\n                    <DigitCode\n                      digits={6}\n                      onDigitCodeChange={onDigitCodeChange}\n                    />\n                  );\n                }\n              }\n            ]}\n            actions={[\n              {\n                type: 'primary',\n                label: 'Sign In',\n                disabled: !codeComplete,\n                onClick: onSignIn\n              },\n              {\n                type: 'secondary',\n                label: 'Cancel',\n                onClick: onCancel\n              },\n              {\n                type: 'tertiary',\n                label: 'Send new code',\n                onClick: onRequestNewCode\n              }\n            ]}\n          />\n        </div>\n      </div>\n    </Splash>\n  );\n});\n"]},"metadata":{},"sourceType":"module"}