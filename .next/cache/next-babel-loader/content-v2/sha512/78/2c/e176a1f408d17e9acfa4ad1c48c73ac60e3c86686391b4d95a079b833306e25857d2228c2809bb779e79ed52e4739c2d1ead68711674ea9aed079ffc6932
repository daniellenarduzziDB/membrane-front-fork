{"ast":null,"code":"import _defineProperty from \"/home/juanma/projects/membrane-front/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/juanma/projects/membrane-front/src/legacy/components/Form/index.js\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { memo, useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport classnames from 'classnames';\nimport _ from 'lodash'; //styles\n\nimport * as styles from './styles.module.scss'; //components\n\nimport Field from './Field';\nimport Button from '../Button';\nexport default _c2 = /*#__PURE__*/memo(_c = _s(function Form(props) {\n  var _this = this;\n\n  _s();\n\n  //bind styles\n  classnames.bind(styles); //hook form\n\n  var _useForm = useForm(),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit,\n      getValues = _useForm.getValues,\n      setError = _useForm.setError,\n      setValue = _useForm.setValue,\n      watch = _useForm.watch,\n      trigger = _useForm.trigger,\n      _useForm$formState = _useForm.formState,\n      isDirty = _useForm$formState.isDirty,\n      isSubmitted = _useForm$formState.isSubmitted,\n      errors = _useForm$formState.errors; // useEffect(() => {\n  //   props.items.map(item => {\n  //     item.uid = shortid.generate();\n  //   });\n  // }, []);\n\n\n  useEffect(function () {\n    if (props.customError) {\n      var _props$customError = props.customError,\n          field = _props$customError.field,\n          type = _props$customError.type,\n          message = _props$customError.message;\n      errors[field] = {\n        type: type,\n        message: message\n      };\n      setError(field, {\n        type: type,\n        message: message\n      });\n    } // eslint-disable-next-line\n\n  }, [errors, props.customError]);\n\n  var onSubmit = function onSubmit(data, e) {\n    var submitAction = _.find(props.actions, {\n      useSubmitBehavior: true\n    });\n\n    if (submitAction) submitAction.onClick(data);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    className: styles.form,\n    children: [props.items.map(function (field, index) {\n      return /*#__PURE__*/_jsxDEV(Field, _objectSpread(_objectSpread({}, field), {}, {\n        formState: {\n          isDirty: isDirty,\n          isSubmitted: isSubmitted,\n          errors: errors,\n          watch: watch,\n          trigger: trigger,\n          register: register,\n          getValues: getValues,\n          setValue: setValue\n        }\n      }), index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, _this);\n    }), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.actionGroup,\n      children: [!!_.filter(props.actions, {\n        type: 'primary'\n      }).length && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.primaryAction,\n        children: _.filter(props.actions, {\n          type: 'primary'\n        }).map(function (button, index) {\n          return /*#__PURE__*/_jsxDEV(Button, {\n            disabled: button.disabled,\n            text: button.label,\n            type: \"primary\",\n            useSubmitBehavior: button.useSubmitBehavior,\n            onClick: !button.useSubmitBehavior ? button.onClick : undefined\n          }, 'btn-primary-' + index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), !!_.filter(props.actions, {\n        type: 'secondary'\n      }).length && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.secondaryAction,\n        children: _.filter(props.actions, {\n          type: 'secondary'\n        }).map(function (button, index) {\n          return /*#__PURE__*/_jsxDEV(Button, {\n            text: button.label,\n            type: \"secondary\",\n            onClick: button.onClick\n          }, 'btn-secondary-' + index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), !!_.filter(props.actions, {\n      type: 'tertiary'\n    }).length && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.tertiaryAction,\n      children: _.filter(props.actions, {\n        type: 'tertiary'\n      }).map(function (button, index) {\n        return /*#__PURE__*/_jsxDEV(Button, {\n          text: button.label,\n          type: \"tertiary\",\n          linkTo: button.linkTo,\n          onClick: button.onClick\n        }, 'btn-tertiary-' + index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 15\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n}, \"oDkHcPo+Y9suey2/m5bgycTbnmM=\", false, function () {\n  return [useForm];\n}));\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"%default%$memo\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/home/juanma/projects/membrane-front/src/legacy/components/Form/index.js"],"names":["React","memo","useEffect","useForm","classnames","_","styles","Field","Button","Form","props","bind","register","handleSubmit","getValues","setError","setValue","watch","trigger","formState","isDirty","isSubmitted","errors","customError","field","type","message","onSubmit","data","e","submitAction","find","actions","useSubmitBehavior","onClick","form","items","map","index","actionGroup","filter","length","primaryAction","button","disabled","label","undefined","secondaryAction","tertiaryAction","linkTo"],"mappings":"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","sourcesContent":["import React, { memo, useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport classnames from 'classnames';\nimport _ from 'lodash';\n\n//styles\nimport * as styles from './styles.module.scss';\n\n//components\nimport Field from './Field';\nimport Button from '../Button';\n\nexport default memo(function Form(props) {\n  //bind styles\n  classnames.bind(styles);\n\n  //hook form\n  const {\n    register,\n    handleSubmit,\n    getValues,\n    setError,\n    setValue,\n    watch,\n    trigger,\n    formState: { isDirty, isSubmitted, errors }\n  } = useForm();\n\n  // useEffect(() => {\n  //   props.items.map(item => {\n  //     item.uid = shortid.generate();\n  //   });\n  // }, []);\n\n  useEffect(() => {\n    if (props.customError) {\n      const { field, type, message } = props.customError;\n      errors[field] = { type, message };\n      setError(field, { type, message });\n    }\n    // eslint-disable-next-line\n  }, [errors, props.customError]);\n\n  const onSubmit = (data, e) => {\n    let submitAction = _.find(props.actions, { useSubmitBehavior: true });\n    if (submitAction) submitAction.onClick(data);\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)} className={styles.form}>\n      {props.items.map((field, index) => {\n        return (\n          <Field\n            key={index}\n            {...field}\n            formState={{\n              isDirty,\n              isSubmitted,\n              errors,\n              watch,\n              trigger,\n              register,\n              getValues,\n              setValue\n            }}\n          />\n        );\n      })}\n\n      <div className={styles.actionGroup}>\n        {!!_.filter(props.actions, { type: 'primary' }).length && (\n          <div className={styles.primaryAction}>\n            {_.filter(props.actions, { type: 'primary' }).map(\n              (button, index) => (\n                <Button\n                  key={'btn-primary-' + index}\n                  disabled={button.disabled}\n                  text={button.label}\n                  type=\"primary\"\n                  useSubmitBehavior={button.useSubmitBehavior}\n                  onClick={\n                    !button.useSubmitBehavior ? button.onClick : undefined\n                  }\n                />\n              )\n            )}\n          </div>\n        )}\n\n        {!!_.filter(props.actions, { type: 'secondary' }).length && (\n          <div className={styles.secondaryAction}>\n            {_.filter(props.actions, { type: 'secondary' }).map(\n              (button, index) => (\n                <Button\n                  key={'btn-secondary-' + index}\n                  text={button.label}\n                  type=\"secondary\"\n                  onClick={button.onClick}\n                />\n              )\n            )}\n          </div>\n        )}\n      </div>\n\n      {!!_.filter(props.actions, { type: 'tertiary' }).length && (\n        <div className={styles.tertiaryAction}>\n          {_.filter(props.actions, { type: 'tertiary' }).map(\n            (button, index) => (\n              <Button\n                key={'btn-tertiary-' + index}\n                text={button.label}\n                type=\"tertiary\"\n                linkTo={button.linkTo}\n                onClick={button.onClick}\n              />\n            )\n          )}\n        </div>\n      )}\n    </form>\n  );\n});\n"]},"metadata":{},"sourceType":"module"}