{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/juanma/projects/membrane-front/src/legacy/views/TwoFactor/index.js\";\nimport { memo, useState } from 'react';\nimport classnames from 'classnames'; //styles\n\nimport * as styles from './styles.module.scss'; //hooks\n\nimport useUser from '../../hooks/useUser'; //components\n\nimport Form from '../../components/Form';\nimport Splash from '../../components/Splash';\nimport DigitCode from '../../components/DigitCode';\nexport default /*#__PURE__*/memo(function TwoFactor(props) {\n  //hook user\n  const {\n    twoFactorAuth,\n    twoFactorSignIn,\n    requestNewSecurityCode,\n    clearToken\n  } = useUser(); //states\n\n  const {\n    0: customError,\n    1: setCustomError\n  } = useState('');\n  const {\n    0: codeValue,\n    1: setCodeValue\n  } = useState('');\n  const {\n    0: codeComplete,\n    1: setCodeComplete\n  } = useState(false); //bind styles\n\n  classnames.bind(styles);\n\n  const onSignIn = () => {\n    const payload = {\n      code: codeValue\n    };\n    twoFactorSignIn(payload).then(() => {\n      props.history.push('/');\n    }).catch(error => setCustomError({\n      field: 'digit',\n      type: 'custom',\n      message: error === null || error === void 0 ? void 0 : error.message\n    }));\n  };\n\n  const onCancel = () => {\n    clearToken();\n    props.history.push('/sign-in');\n  };\n\n  const onRequestNewCode = () => {\n    setCustomError('');\n    setCodeComplete(false);\n    requestNewSecurityCode().catch(error => setCustomError({\n      field: 'digit',\n      type: 'custom',\n      message: error === null || error === void 0 ? void 0 : error.message\n    }));\n  };\n\n  const onDigitCodeChange = (digitInput, value) => {\n    setCodeValue(value);\n    setCodeComplete(!digitInput.filter(digit => !digit.value).length);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Splash, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.twoFactorContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Two-Factor Authentication\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Please enter below the 6-digit security code. You will get it through\\xA0\", twoFactorAuth === null || twoFactorAuth === void 0 ? void 0 : twoFactorAuth.type, \" to your ********\", twoFactorAuth === null || twoFactorAuth === void 0 ? void 0 : twoFactorAuth.clue, \"\\xA0\", (twoFactorAuth === null || twoFactorAuth === void 0 ? void 0 : twoFactorAuth.type) === 'SMS' ? 'phone' : 'email account', \".\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.twoFactorForm,\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          customError: customError,\n          items: [{\n            label: 'Enter your 6-digit code',\n            name: 'digit',\n            type: 'custom',\n            customComponent: () => {\n              return /*#__PURE__*/_jsxDEV(DigitCode, {\n                digits: 6,\n                onDigitCodeChange: onDigitCodeChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 21\n              }, this);\n            }\n          }],\n          actions: [{\n            type: 'primary',\n            label: 'Sign In',\n            disabled: !codeComplete,\n            onClick: onSignIn\n          }, {\n            type: 'secondary',\n            label: 'Cancel',\n            onClick: onCancel\n          }, {\n            type: 'tertiary',\n            label: 'Send new code',\n            onClick: onRequestNewCode\n          }]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n});","map":{"version":3,"sources":["/home/juanma/projects/membrane-front/src/legacy/views/TwoFactor/index.js"],"names":["memo","useState","classnames","styles","useUser","Form","Splash","DigitCode","TwoFactor","props","twoFactorAuth","twoFactorSignIn","requestNewSecurityCode","clearToken","customError","setCustomError","codeValue","setCodeValue","codeComplete","setCodeComplete","bind","onSignIn","payload","code","then","history","push","catch","error","field","type","message","onCancel","onRequestNewCode","onDigitCodeChange","digitInput","value","filter","digit","length","twoFactorContainer","clue","twoFactorForm","label","name","customComponent","disabled","onClick"],"mappings":";;AAAA,SAASA,IAAT,EAAeC,QAAf,QAA+B,OAA/B;AACA,OAAOC,UAAP,MAAuB,YAAvB,C,CAEA;;AACA,OAAO,KAAKC,MAAZ,MAAwB,sBAAxB,C,CAEA;;AACA,OAAOC,OAAP,MAAoB,qBAApB,C,CAEA;;AACA,OAAOC,IAAP,MAAiB,uBAAjB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AAEA,4BAAeP,IAAI,CAAC,SAASQ,SAAT,CAAmBC,KAAnB,EAA0B;AAC5C;AACA,QAAM;AAAEC,IAAAA,aAAF;AAAiBC,IAAAA,eAAjB;AAAkCC,IAAAA,sBAAlC;AAA0DC,IAAAA;AAA1D,MACJT,OAAO,EADT,CAF4C,CAK5C;;AACA,QAAM;AAAA,OAACU,WAAD;AAAA,OAAcC;AAAd,MAAgCd,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM;AAAA,OAACe,SAAD;AAAA,OAAYC;AAAZ,MAA4BhB,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM;AAAA,OAACiB,YAAD;AAAA,OAAeC;AAAf,MAAkClB,QAAQ,CAAC,KAAD,CAAhD,CAR4C,CAU5C;;AACAC,EAAAA,UAAU,CAACkB,IAAX,CAAgBjB,MAAhB;;AAEA,QAAMkB,QAAQ,GAAG,MAAM;AACrB,UAAMC,OAAO,GAAG;AAAEC,MAAAA,IAAI,EAAEP;AAAR,KAAhB;AAEAL,IAAAA,eAAe,CAACW,OAAD,CAAf,CACGE,IADH,CACQ,MAAM;AACVf,MAAAA,KAAK,CAACgB,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACD,KAHH,EAIGC,KAJH,CAISC,KAAK,IACVb,cAAc,CAAC;AACbc,MAAAA,KAAK,EAAE,OADM;AAEbC,MAAAA,IAAI,EAAE,QAFO;AAGbC,MAAAA,OAAO,EAAEH,KAAF,aAAEA,KAAF,uBAAEA,KAAK,CAAEG;AAHH,KAAD,CALlB;AAWD,GAdD;;AAgBA,QAAMC,QAAQ,GAAG,MAAM;AACrBnB,IAAAA,UAAU;AACVJ,IAAAA,KAAK,CAACgB,OAAN,CAAcC,IAAd,CAAmB,UAAnB;AACD,GAHD;;AAKA,QAAMO,gBAAgB,GAAG,MAAM;AAC7BlB,IAAAA,cAAc,CAAC,EAAD,CAAd;AACAI,IAAAA,eAAe,CAAC,KAAD,CAAf;AACAP,IAAAA,sBAAsB,GAAGe,KAAzB,CAA+BC,KAAK,IAClCb,cAAc,CAAC;AACbc,MAAAA,KAAK,EAAE,OADM;AAEbC,MAAAA,IAAI,EAAE,QAFO;AAGbC,MAAAA,OAAO,EAAEH,KAAF,aAAEA,KAAF,uBAAEA,KAAK,CAAEG;AAHH,KAAD,CADhB;AAOD,GAVD;;AAYA,QAAMG,iBAAiB,GAAG,CAACC,UAAD,EAAaC,KAAb,KAAuB;AAC/CnB,IAAAA,YAAY,CAACmB,KAAD,CAAZ;AACAjB,IAAAA,eAAe,CAAC,CAACgB,UAAU,CAACE,MAAX,CAAkBC,KAAK,IAAI,CAACA,KAAK,CAACF,KAAlC,EAAyCG,MAA3C,CAAf;AACD,GAHD;;AAKA,sBACE,QAAC,MAAD;AAAA,2BACE;AAAK,MAAA,SAAS,EAAEpC,MAAM,CAACqC,kBAAvB;AAAA,8BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAA,gGAEgB9B,aAFhB,aAEgBA,aAFhB,uBAEgBA,aAAa,CAAEoB,IAF/B,uBAGGpB,aAHH,aAGGA,aAHH,uBAGGA,aAAa,CAAE+B,IAHlB,UAIG,CAAA/B,aAAa,SAAb,IAAAA,aAAa,WAAb,YAAAA,aAAa,CAAEoB,IAAf,MAAwB,KAAxB,GAAgC,OAAhC,GAA0C,eAJ7C;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,eASE;AAAK,QAAA,SAAS,EAAE3B,MAAM,CAACuC,aAAvB;AAAA,+BACE,QAAC,IAAD;AACE,UAAA,WAAW,EAAE5B,WADf;AAEE,UAAA,KAAK,EAAE,CACL;AACE6B,YAAAA,KAAK,EAAE,yBADT;AAEEC,YAAAA,IAAI,EAAE,OAFR;AAGEd,YAAAA,IAAI,EAAE,QAHR;AAIEe,YAAAA,eAAe,EAAE,MAAM;AACrB,kCACE,QAAC,SAAD;AACE,gBAAA,MAAM,EAAE,CADV;AAEE,gBAAA,iBAAiB,EAAEX;AAFrB;AAAA;AAAA;AAAA;AAAA,sBADF;AAMD;AAXH,WADK,CAFT;AAiBE,UAAA,OAAO,EAAE,CACP;AACEJ,YAAAA,IAAI,EAAE,SADR;AAEEa,YAAAA,KAAK,EAAE,SAFT;AAGEG,YAAAA,QAAQ,EAAE,CAAC5B,YAHb;AAIE6B,YAAAA,OAAO,EAAE1B;AAJX,WADO,EAOP;AACES,YAAAA,IAAI,EAAE,WADR;AAEEa,YAAAA,KAAK,EAAE,QAFT;AAGEI,YAAAA,OAAO,EAAEf;AAHX,WAPO,EAYP;AACEF,YAAAA,IAAI,EAAE,UADR;AAEEa,YAAAA,KAAK,EAAE,eAFT;AAGEI,YAAAA,OAAO,EAAEd;AAHX,WAZO;AAjBX;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cATF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAoDD,CAvGkB,CAAnB","sourcesContent":["import { memo, useState } from 'react';\nimport classnames from 'classnames';\n\n//styles\nimport * as styles from './styles.module.scss';\n\n//hooks\nimport useUser from '../../hooks/useUser';\n\n//components\nimport Form from '../../components/Form';\nimport Splash from '../../components/Splash';\nimport DigitCode from '../../components/DigitCode';\n\nexport default memo(function TwoFactor(props) {\n  //hook user\n  const { twoFactorAuth, twoFactorSignIn, requestNewSecurityCode, clearToken } =\n    useUser();\n\n  //states\n  const [customError, setCustomError] = useState('');\n  const [codeValue, setCodeValue] = useState('');\n  const [codeComplete, setCodeComplete] = useState(false);\n\n  //bind styles\n  classnames.bind(styles);\n\n  const onSignIn = () => {\n    const payload = { code: codeValue };\n\n    twoFactorSignIn(payload)\n      .then(() => {\n        props.history.push('/');\n      })\n      .catch(error =>\n        setCustomError({\n          field: 'digit',\n          type: 'custom',\n          message: error?.message\n        })\n      );\n  };\n\n  const onCancel = () => {\n    clearToken();\n    props.history.push('/sign-in');\n  };\n\n  const onRequestNewCode = () => {\n    setCustomError('');\n    setCodeComplete(false);\n    requestNewSecurityCode().catch(error =>\n      setCustomError({\n        field: 'digit',\n        type: 'custom',\n        message: error?.message\n      })\n    );\n  };\n\n  const onDigitCodeChange = (digitInput, value) => {\n    setCodeValue(value);\n    setCodeComplete(!digitInput.filter(digit => !digit.value).length);\n  };\n\n  return (\n    <Splash>\n      <div className={styles.twoFactorContainer}>\n        <h2>Two-Factor Authentication</h2>\n        <label>\n          Please enter below the 6-digit security code. You will get it\n          through&nbsp;{twoFactorAuth?.type} to your ********\n          {twoFactorAuth?.clue}&nbsp;\n          {twoFactorAuth?.type === 'SMS' ? 'phone' : 'email account'}.\n        </label>\n\n        <div className={styles.twoFactorForm}>\n          <Form\n            customError={customError}\n            items={[\n              {\n                label: 'Enter your 6-digit code',\n                name: 'digit',\n                type: 'custom',\n                customComponent: () => {\n                  return (\n                    <DigitCode\n                      digits={6}\n                      onDigitCodeChange={onDigitCodeChange}\n                    />\n                  );\n                }\n              }\n            ]}\n            actions={[\n              {\n                type: 'primary',\n                label: 'Sign In',\n                disabled: !codeComplete,\n                onClick: onSignIn\n              },\n              {\n                type: 'secondary',\n                label: 'Cancel',\n                onClick: onCancel\n              },\n              {\n                type: 'tertiary',\n                label: 'Send new code',\n                onClick: onRequestNewCode\n              }\n            ]}\n          />\n        </div>\n      </div>\n    </Splash>\n  );\n});\n"]},"metadata":{},"sourceType":"module"}