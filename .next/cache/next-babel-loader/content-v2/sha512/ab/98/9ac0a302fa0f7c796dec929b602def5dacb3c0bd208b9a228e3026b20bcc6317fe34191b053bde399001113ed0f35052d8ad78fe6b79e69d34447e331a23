{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/juanma/projects/membrane-front/src/legacy/components/Form/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { memo, useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport classnames from 'classnames';\nimport _ from 'lodash'; //styles\n\nimport * as styles from './styles.module.scss'; //components\n\nimport Field from './Field';\nimport Button from '../Button';\nexport default /*#__PURE__*/memo(function Form(props) {\n  //bind styles\n  classnames.bind(styles); //hook form\n\n  const {\n    register,\n    handleSubmit,\n    getValues,\n    setError,\n    setValue,\n    watch,\n    trigger,\n    formState: {\n      isDirty,\n      isSubmitted,\n      errors\n    }\n  } = useForm(); // useEffect(() => {\n  //   props.items.map(item => {\n  //     item.uid = shortid.generate();\n  //   });\n  // }, []);\n\n  useEffect(() => {\n    if (props.customError) {\n      const {\n        field,\n        type,\n        message\n      } = props.customError;\n      errors[field] = {\n        type,\n        message\n      };\n      setError(field, {\n        type,\n        message\n      });\n    } // eslint-disable-next-line\n\n  }, [errors, props.customError]);\n\n  const onSubmit = (data, e) => {\n    let submitAction = _.find(props.actions, {\n      useSubmitBehavior: true\n    });\n\n    if (submitAction) submitAction.onClick(data);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    className: styles.form,\n    children: [props.items.map((field, index) => {\n      return /*#__PURE__*/_jsxDEV(Field, _objectSpread(_objectSpread({}, field), {}, {\n        formState: {\n          isDirty,\n          isSubmitted,\n          errors,\n          watch,\n          trigger,\n          register,\n          getValues,\n          setValue\n        }\n      }), index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, this);\n    }), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.actionGroup,\n      children: [!!_.filter(props.actions, {\n        type: 'primary'\n      }).length && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.primaryAction,\n        children: _.filter(props.actions, {\n          type: 'primary'\n        }).map((button, index) => /*#__PURE__*/_jsxDEV(Button, {\n          disabled: button.disabled,\n          text: button.label,\n          type: \"primary\",\n          useSubmitBehavior: button.useSubmitBehavior,\n          onClick: !button.useSubmitBehavior ? button.onClick : undefined\n        }, 'btn-primary-' + index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), !!_.filter(props.actions, {\n        type: 'secondary'\n      }).length && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.secondaryAction,\n        children: _.filter(props.actions, {\n          type: 'secondary'\n        }).map((button, index) => /*#__PURE__*/_jsxDEV(Button, {\n          text: button.label,\n          type: \"secondary\",\n          onClick: button.onClick\n        }, 'btn-secondary-' + index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), !!_.filter(props.actions, {\n      type: 'tertiary'\n    }).length && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.tertiaryAction,\n      children: _.filter(props.actions, {\n        type: 'tertiary'\n      }).map((button, index) => /*#__PURE__*/_jsxDEV(Button, {\n        text: button.label,\n        type: \"tertiary\",\n        linkTo: button.linkTo,\n        onClick: button.onClick\n      }, 'btn-tertiary-' + index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 15\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n});","map":{"version":3,"sources":["/home/juanma/projects/membrane-front/src/legacy/components/Form/index.js"],"names":["React","memo","useEffect","useForm","classnames","_","styles","Field","Button","Form","props","bind","register","handleSubmit","getValues","setError","setValue","watch","trigger","formState","isDirty","isSubmitted","errors","customError","field","type","message","onSubmit","data","e","submitAction","find","actions","useSubmitBehavior","onClick","form","items","map","index","actionGroup","filter","length","primaryAction","button","disabled","label","undefined","secondaryAction","tertiaryAction","linkTo"],"mappings":"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","sourcesContent":["import React, { memo, useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport classnames from 'classnames';\nimport _ from 'lodash';\n\n//styles\nimport * as styles from './styles.module.scss';\n\n//components\nimport Field from './Field';\nimport Button from '../Button';\n\nexport default memo(function Form(props) {\n  //bind styles\n  classnames.bind(styles);\n\n  //hook form\n  const {\n    register,\n    handleSubmit,\n    getValues,\n    setError,\n    setValue,\n    watch,\n    trigger,\n    formState: { isDirty, isSubmitted, errors }\n  } = useForm();\n\n  // useEffect(() => {\n  //   props.items.map(item => {\n  //     item.uid = shortid.generate();\n  //   });\n  // }, []);\n\n  useEffect(() => {\n    if (props.customError) {\n      const { field, type, message } = props.customError;\n      errors[field] = { type, message };\n      setError(field, { type, message });\n    }\n    // eslint-disable-next-line\n  }, [errors, props.customError]);\n\n  const onSubmit = (data, e) => {\n    let submitAction = _.find(props.actions, { useSubmitBehavior: true });\n    if (submitAction) submitAction.onClick(data);\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)} className={styles.form}>\n      {props.items.map((field, index) => {\n        return (\n          <Field\n            key={index}\n            {...field}\n            formState={{\n              isDirty,\n              isSubmitted,\n              errors,\n              watch,\n              trigger,\n              register,\n              getValues,\n              setValue\n            }}\n          />\n        );\n      })}\n\n      <div className={styles.actionGroup}>\n        {!!_.filter(props.actions, { type: 'primary' }).length && (\n          <div className={styles.primaryAction}>\n            {_.filter(props.actions, { type: 'primary' }).map(\n              (button, index) => (\n                <Button\n                  key={'btn-primary-' + index}\n                  disabled={button.disabled}\n                  text={button.label}\n                  type=\"primary\"\n                  useSubmitBehavior={button.useSubmitBehavior}\n                  onClick={\n                    !button.useSubmitBehavior ? button.onClick : undefined\n                  }\n                />\n              )\n            )}\n          </div>\n        )}\n\n        {!!_.filter(props.actions, { type: 'secondary' }).length && (\n          <div className={styles.secondaryAction}>\n            {_.filter(props.actions, { type: 'secondary' }).map(\n              (button, index) => (\n                <Button\n                  key={'btn-secondary-' + index}\n                  text={button.label}\n                  type=\"secondary\"\n                  onClick={button.onClick}\n                />\n              )\n            )}\n          </div>\n        )}\n      </div>\n\n      {!!_.filter(props.actions, { type: 'tertiary' }).length && (\n        <div className={styles.tertiaryAction}>\n          {_.filter(props.actions, { type: 'tertiary' }).map(\n            (button, index) => (\n              <Button\n                key={'btn-tertiary-' + index}\n                text={button.label}\n                type=\"tertiary\"\n                linkTo={button.linkTo}\n                onClick={button.onClick}\n              />\n            )\n          )}\n        </div>\n      )}\n    </form>\n  );\n});\n"]},"metadata":{},"sourceType":"module"}